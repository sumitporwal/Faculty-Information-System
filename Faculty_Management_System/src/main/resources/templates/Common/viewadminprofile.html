<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Web UI Kit &amp; Dashboard Template based on Bootstrap">
	<meta name="author" content="AdminKit">
	<meta name="keywords" content="adminkit, bootstrap, web ui kit, dashboard template, admin template">

	<link rel="shortcut icon" href="img/icons/icon-48x48.png" />

	<title>Profile | Admin</title>

	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
     <!-- CSS only -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
     <link href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap5.min.css" rel="stylesheet">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
     
       <link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.2.0/mdb.min.css"
  rel="stylesheet"
/>

<link href="../../static/css/app.css" rel="stylesheet">

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
     <script src="../../static/js/vendor.js"></script>
	 <script src="../../static/js/app.js"></script>	
     <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>

<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap5.min.js"></script>
</head>

<style>
body {
        color: #566787;
		background: #f5f5f5;
		font-family: 'Varela Round', sans-serif;
		font-size: 13px;
	}
.content{
  padding: 1rem 1rem 0rem;
}
</style>

<body>
	<div class="wrapper">
	   <div th:if="${session.CurrentLoggedInUser.getRoles().getRole_id()}==1">
	        <div th:insert="~{Super_Admin/sidebar :: sidebar}"></div>
	   </div>
		<div class="main">
		 	<div th:if="${session.CurrentLoggedInUser.getRoles().getRole_id()}==1">
	             <div th:insert="~{Super_Admin/header :: header}"></div>
	        </div>
			<main class="content">
				<div class="container-fluid p-0">

				<div class="row mb-2 mb-xl-3">
                  <div class="col-auto d-none d-sm-block">
					<h1 class="h3 mb-3">Profile</h1>
				  </div>
				  
				  <div class="col-auto ml-auto text-right mt-n1">
							<nav aria-label="breadcrumb">
								<ol class="breadcrumb bg-transparent p-0 mt-1 mb-0">
									<li class="breadcrumb-item"><a href="#">Admin</a></li>
									<li class="breadcrumb-item active" aria-current="page">Profile</li>
								</ol>
							</nav>
						</div>

					<div class="row">
						<div class="col-md-3 col-xl-2">

							<div class="card">
								<div class="card-header">
									<h5 class="card-title mb-0">Profile Settings</h5>
								</div>

								<div class="list-group list-group-flush" role="tablist">
									<a class="list-group-item list-group-item-action active" data-toggle="list" th:data-id="${user2.getUser_id()}" href="#account" id="accountTab" role="tab">
          Account
        </a>
									<a class="list-group-item list-group-item-action" data-toggle="list" href="#password" role="tab">
         Change Password
        </a>
									
									<a class="list-group-item list-group-item-action" data-toggle="list" href="#" role="tab">
          Delete account
        </a>
								</div>
							</div>
						</div>
						
						<div class="col-md-9 col-xl-10">
							<div class="tab-content">
								<div class="tab-pane fade show active" id="account" role="tabpanel">
                                  <form  th:object="${additional_user_details}" enctype="multipart/form-data" class="register-form" id="register-form" method="POST">
									<div class="card">
										<div class="card-header">

											<h5 class="card-title mb-0">Public info</h5>
										</div>
										<div class="card-body">
												<div class="row">
													<div class="col-md-8">
													  <div class="form-row">
														<div class="form-group col-md-6">
														   <label>Student Name:</label>
														   <input type="text" th:field="*{user.name}" id="name" name="name" class="form-control" required>
													    </div>
													    <div class="form-group col-md-6">
														  <label>Enrollment No:</label>
														  <input type="text" th:field="*{user.username}" id="username" name="username" class="form-control" required>
													    </div>
													      <input type="hidden"  th:field="*{user.stream}" id="stream" name="stream" class="form-control" required>					                                
							                              <input type="hidden"  th:field="*{user.department}" id="department" name="department" class="form-control" required>	
													 </div>
													<div class="form-row">
													   <div class="form-group col-md-6">
														  <label>Class:</label>
														  <input type="text" th:field="*{Class}" id="Class" class="form-control">
													   </div>
													   <div class="form-group col-md-6">
														  <label>Section:</label>
														  <input type="text" th:field="*{sem}" id="sem" class="form-control">
													  </div>
												   </div>
												   <div class="form-row">
													    <div class="form-group col-md-6">
														  <label>Mobile No:</label>
														  <input type="tel" th:field="*{user.phno}" id="phno" name="phno" class="form-control">
													   </div>
													   <div class="form-group col-md-6">
													      <label>Email</label>
													      <input type="email" th:field="*{user.email}" id="email" class="form-control" placeholder="Email" required>
												      </div>
												   </div>
												</div>
												<div class="col-md-4">
														<div class="text-center" style="margin-top:-19px">
														    <span th:if="${additional_user_details2}"><span th:if="${additional_user_details2.getPhoto()!=null}"><img alt="Charles Hall" th:src="'/uploads/Images/'+${additional_user_details2.getPhoto().getNewFileName()}" class="rounded-circle img-responsive mt-2" width="128" height="128" /></span>
                                                                  <span th:if="${additional_user_details2.getPhoto()==null}"><i class="bi bi-person-circle" style="font-size:128px"></i></span>
                                                            </span>
					                                        <span th:if="!${additional_user_details2}"><i class="bi bi-person-circle" style="font-size:128px"></i></span>
															<div class="mt-2">
															<input type="file" name="file"  class="form-control">
														<!-- 	<span class="btn btn-primary"><i class="fas fa-upload"></i> Upload</span>-->
															</div>
														<!-- <small>For best results, use an image at least 128px by 128px in .jpg format</small>-->
														</div>
													</div>
												</div>	
													
													<div class="form-row">
													    <div class="form-group col-md-4">
													       <label>Date of Birth</label>
													       <input type="date" th:field="*{user.dob}" id="dob" name="dob" class="form-control dob">
												        </div>
													    <div class="form-group col-md-4">
													       <label>Blood Group</label>
													       <select th:field="*{blood_group}" id="blood_group" class="form-control">
														    <option value="" selected>Select</option>
                                                            <option value="A-">A-</option>
                                                            <option value="A+">A+</option>
                                                            <option value="AB-">AB-</option>
                                                            <option value="AB+">AB+</option>
                                                            <option value="B-">B-</option>
                                                            <option value="B+">B+</option>
                                                            <option value="O-">O-</option>
                                                            <option value="O+">O+</option>
                                                         </select>
												        </div>
												        <div class="form-group col-md-4">
														  <label>Gender</label>
														  <select th:field="*{gender}" id="gender" class="form-control">
														    <option value="" selected>Select</option>
                                                            <option value="Male">Male</option>
                                                            <option value="Female">Female</option>
                                                            <option value="Other">Other</option>
                                                         </select>
													   </div> 
													</div>
												
												<div class="form-row">
												    <div class="form-group col-md-4">
														  <label>Marital Status</label>
														  <select th:field="*{marital_status}" id="marital_status" class="form-control">
														    <option value="" selected>Select</option>
                                                            <option value="Single">Single</option>
                                                            <option value="Married">Married</option>
                                                            <option value="Divorced">Divorced</option>
                                                         </select>
													</div>  
													<div class="form-group col-md-8">
														   <label >Address</label>
														   <textarea th:field="*{address}" id="address" class="form-control"></textarea>
													   </div>  			
												</div>
												
												<div class="form-row">
												     <div class="form-group col-md-4">
														   <label >City</label>
														   <input type="text" th:field="*{city}" id="city" class="form-control">
													    </div>
													    <div class="form-group col-md-4">
														   <label for="inputState">State</label>
														   <select th:field="*{state}" id="state" class="form-control">
                                                              <option value="" selected>Choose...</option>
                                                              <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                                              <option value="Andhra Pradesh">Andhra Pradesh</option>
                                                              <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                                              <option value="Assam">Assam</option>
                                                              <option value="Bihar">Bihar</option>
                                                              <option value="Chandigarh">Chandigarh</option>
                                                              <option value="Chhattisgarh">Chhattisgarh</option>
                                                              <option value="Dader And Nagar Haveli">Dader And Nagar Haveli</option>
                                                              <option value="Daman And Diu">Daman And Diu</option>
                                                              <option value="Delhi">Delhi</option>
                                                              <option value="Goa">Goa</option>
                                                              <option value="Gujrat">Gujrat</option>
                                                              <option value="Haryana">Haryana</option>
                                                              <option value="Himachal Pradesh">Himachal Pradesh</option>
                                                              <option value="Jammu And Kashmir">Jammu And Kashmir</option>
                                                              <option value="Jharkhand">Jharkhand</option>
                                                              <option value="Karnataka">Karnataka</option>
                                                              <option value="Kerala">Kerala</option>
                                                              <option value="Lakshadeep">Lakshadeep</option>
                                                              <option value="Madhya Pradesh">Madhya Pradesh</option>
                                                              <option value="Maharashtra">Maharashtra</option>
                                                              <option value="Manipur">Manipur</option>
                                                              <option value="Meghalaya">Meghalaya</option>
                                                              <option value="Mizoram">Mizoram</option>
                                                              <option value="Nagaland">Nagaland</option>
                                                              <option value="Orissa">Orissa</option>
                                                              <option value="Pondicherry">Pondicherry</option>
                                                              <option value="Punjab">Punjab</option>
                                                              <option value="Rajasthan">Rajasthan</option>
                                                              <option value="Sikkim">Sikkim</option>
                                                              <option value="Tamil Nadu">Tamil Nadu</option>
                                                              <option value="Telangana">Telangana</option>
                                                              <option value="Tripura">Tripura</option>
                                                              <option value="Uttar Pradesh">Uttar Pradesh</option>
                                                              <option value="Uttarakhand">Uttarakhand</option>
                                                              <option value="West Bengal">West Bengal</option>
                                                           </select>
													   </div>
													   <div class="form-group col-md-4">
														  <label >Pin Code</label>
														  <input type="number" th:field="*{pin_code}" id="pin_code" class="form-control">
													  </div>						
												</div>
												<div class="form-row">
													<div class="form-group col-md-4">
														<label>Father's Name:</label>
														<input type="text" th:field="*{father_name}" id="father_name" class="form-control">
													</div>
													<div class="form-group col-md-4">
														<label>Father's Mobile No:</label>
														<input type="tel" th:field="*{father_phno}" id="father_phno" class="form-control">
													</div>
													<div class="form-group col-md-4">
														<label>Father's Occupation:</label>
														<input type="text" th:field="*{father_occupation}" id="father_occupation" class="form-control">
													</div>
												</div>
												
												<div class="form-row">
												    <div class="form-group col-md-4">
														<label>Mother's Name:</label>
														<input type="text" th:field="*{mother_name}" id="mother_name" class="form-control">
													</div>
													<div class="form-group col-md-4">
														<label>Mother's Mobile No:</label>
														<input type="tel" th:field="*{mother_phno}" id="mother_phno" class="form-control">
													</div>
													<div class="form-group col-md-4">
														<label>Mother's Occupation:</label>
														<input type="text" th:field="*{mother_occupation}" id="mother_occupation" class="form-control">
													</div>
												</div>								
									</div>
								</div>
								</form>

								<!-- 	<div class="card">
										<div class="card-header">

											<h5 class="card-title mb-0">Private info</h5>
										</div>
										<div class="card-body">
											<form>
												<div class="form-row">
													<div class="form-group col-md-6">
														<label>Student Name:</label>
														<input type="text" class="form-control" id="studentname">
													</div>
													<div class="form-group col-md-6">
														<label>Enrollment No:</label>
														<input type="text" class="form-control" id="enrollmentno">
													</div>
													<div class="form-group col-md-6">
														<label>Mobile No:</label>
														<input type="tel" class="form-control" id="phno">
													</div>
													<div class="form-group col-md-6">
														<label>Class:</label>
														<input type="text" class="form-control" id="Class">
													</div>
													<div class="form-group col-md-6">
														<label>Section:</label>
														<input type="text" class="form-control" id="section">
													</div>
													<div class="form-group">
													<label>Email</label>
													<input type="email" class="form-control" id="inputEmail4" placeholder="Email">
												</div>
												<div class="form-group">
													<label>Date of Birth</label>
													<input type="date" class="form-control" id="dob">
												</div>
												<div class="form-group">
													<label>Blood Group</label>
													<input type="text" class="form-control" id="bloodgroup">
												</div>
												<div class="form-row">
													<div class="form-group col-md-6">
														<label>Gender</label>
														<select id="gender" class="form-control">
                                                            <option value="Male">Male</option>
                                                            <option value="Female">Female</option>
                                                            <option value="Other">Other</option>
                                                        </select>
													</div>
													<div class="form-group col-md-6">
														<label>Marital Status</label>
														<select id="maritalstatus" class="form-control">
                                                            <option value="Single">Single</option>
                                                            <option value="Married">Married</option>
                                                            <option value="Other">Other</option>
                                                        </select>
													</div>
												</div>
												<div class="form-row">
													<div class="form-group col-md-6">
														<label>Father's Name:</label>
														<input type="text" class="form-control" id="father_name">
													</div>
													<div class="form-group col-md-6">
														<label>Father's Mobile No:</label>
														<input type="tel" class="form-control" id="father_phno">
													</div>
													<div class="form-group col-md-6">
														<label>Mother's Name:</label>
														<input type="text" class="form-control" id="mother_name">
													</div>
													<div class="form-group col-md-6">
														<label>Mother's Mobile No:</label>
														<input type="tel" class="form-control" id="mother_phno">
													</div>
												</div>
												<div class="form-group col-md-2">
														<label >City</label>
														<input type="text" class="form-control" id="city">
													</div>
													<div class="form-group col-md-4">
														<label for="inputState">State</label>
														<select id="inputState" class="form-control">
                    <option selected>Choose...</option>
                    <option>...</option>
                  </select>
													</div>
													<div class="form-group col-md-2">
														<label >Pin Code</label>
														<input type="number" class="form-control" id="pin_no">
													</div>
												</div>
												<button type="submit" class="btn btn-primary">Save changes</button>
											</form>

										</div>
									</div>-->

								</div>
								<div class="tab-pane fade" id="password" role="tabpanel">
									<div class="card">
										<div class="card-body">
											<h5 class="card-title">Password</h5>

											<form>
												<div class="form-group">
													<label for="inputPasswordCurrent">Current password</label>
													<input type="password" class="form-control" id="inputPasswordCurrent">
													<small><a href="#">Forgot your password?</a></small>
												</div>
												<div class="form-group">
													<label for="inputPasswordNew">New password</label>
													<input type="password" class="form-control" id="inputPasswordNew">
												</div>
												<div class="form-group">
													<label for="inputPasswordNew2">Verify password</label>
													<input type="password" class="form-control" id="inputPasswordNew2">
												</div>
												<button type="submit" class="btn btn-primary">Save changes</button>
											</form>

										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</main>
            <div th:insert="~{footer :: footer}"></div>
		</div>
	</div>

<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.2.0/mdb.min.js"
></script>

  <script>
  $(document).ready(function(){
	    var user_id=$('#accountTab').data("id");
	    var href = "/findUser/"+user_id;
	    
	    $.get(href, function(user){
          var href1 = "/findAdditionalUserDetails/"+user_id;
          
          $('#register-form #name').val(user.name);
          $('#register-form #email').val(user.email);
          $('#register-form #phno').val(user.phno);
          $('#register-form #dob').val(user.dob);
          $('#register-form #stream').val(user.stream);
          $('#register-form #department').val(user.department);
          $('#register-form #username').val(user.username);
          $('#register-form #password').val(user.password);
      
          $.get(href1, function(user_details){
          	console.log(user_details);
          	console.log(user);
          	if(user_details.additionaluserdetails_id<=0){
          		$('#register-form').attr('action',"/addAdditionalUserDetails/"+user.user_id);
          	}
          	else{
          	 $('#register-form').attr('action',"/updateAddditionalUserDetails/"+user_details.additionaluserdetails_id); 
              	$('#register-form #Class').val(user_details.Class);
                  $('#register-form #sem').val(user_details.sem);
                  $('#register-form #blood_group').val(user_details.blood_group);
                  $('#register-form #gender').val(user_details.gender);
                  $('#register-form #marital_status').val(user_details.marital_status);
                  $('#register-form #address').val(user_details.address);
                  $('#register-form #city').val(user_details.city);
                  $('#register-form #state').val(user_details.state);
                  $('#register-form #pin_code').val(user_details.pin_code);
                  $('#register-form #father_name').val(user_details.father_name);
                  $('#register-form #father_phno').val(user_details.father_phno);
                  $('#register-form #father_occupation').val(user_details.father_occupation);
                  $('#register-form #mother_name').val(user_details.mother_name);
                  $('#register-form #mother_phno').val(user_details.mother_phno);
                  $('#register-form #mother_occupation').val(user_details.mother_occupation);
                  console.log($('#register-form #blood_group').val());
          	}
          });
      }); 
  });
</script>
</body>

</html>