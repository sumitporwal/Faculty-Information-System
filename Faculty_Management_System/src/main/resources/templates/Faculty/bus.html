<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Web UI Kit &amp; Dashboard Template based on Bootstrap">
	<meta name="author" content="AdminKit">
	<meta name="keywords" content="adminkit, bootstrap, web ui kit, dashboard template, admin template">

	<link rel="shortcut icon" href="../img/icons/icon-48x48.png" />

	<title>Faculty Dashboard</title>

       <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
     <!-- CSS only -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
     <link href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap5.min.css" rel="stylesheet">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
       <link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
  rel="stylesheet"
/>
<!-- Google Fonts -->
<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
  rel="stylesheet"
/>
<!-- MDB -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.2.0/mdb.min.css"
  rel="stylesheet"
/>

<link href="../../static/css/app.css" rel="stylesheet">

     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
     <script src="../../static/js/vendor.js"></script>
	 <script src="../../static/js/app.js"></script>	
     <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
     <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.css">
<script src="https://unpkg.com/bootstrap-table@1.18.2/dist/bootstrap-table.min.js"></script>
<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap5.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.css" rel="stylesheet" type="text/css" />

               
</head>
<style>
body {
        color: #566787;
		background: #f5f5f5;
		font-family: 'Varela Round', sans-serif;
		font-size: 13px;
	}
.content{
  padding: 1rem 1rem 0rem;
}
.table-responsive {
    margin: 0px 0;
    width: 100%;
}
#example_wrapper{
   overflow: hidden;
}
div.table-responsive>div.dataTables_wrapper>div.row{
   overflow: auto;
}
	.table-wrapper {
        background: #fff;
        padding: 20px 15px;
		border-radius: 3px;
        box-shadow: 0 1px 1px rgba(0,0,0,.05);
    }
	
	.table-title {        
		padding-bottom: 15px;
		background: #5375a7;
		color: #fff;
		padding: 16px 30px;
		margin: -20px -16px 5px;
		border-radius: 3px 3px 0 0;
    }
    .table-title h2 {
		margin: 5px 0 0;
		font-size: 24px;
	}
	.table-title .btn-group {
		float: right;
                                  
	}
	.table-title .btn {
		color: #fff;
		float: right;
		font-size: 13px;
		border: none;
		min-width: 50px;
		border-radius: 2px;
		border: none;
		outline: none !important;
		margin-left: 10px;
	}
	.table-title .btn i {
		float: left;
		font-size: 21px;
		margin-right: 5px;
	}
	.table-title .btn span {
		float: left;
		margin-top: 2px;
	}
	table{
	    white-space:nowrap;
	}
	table.table tr th{
	   color: black;
	   font-weight: 600;
	}
    table.table tr th, table.table tr td {
        border-color: #e9e9e9;
		padding: 8px 8px;
		vertical-align: middle;
    }
	table.table tr th:first-child {
		width: 60px;
	}
	table.table tr th:last-child {
		width: 100px;
	}
    table.table-striped tbody tr:nth-of-type(odd) {
    	background-color: #fcfcfc;
	}
	table.table-striped.table-hover tbody tr:hover {
		background: #f5f5f5;
	}
    table.table th i {
        font-size: 13px;
        margin: 0 15px;
        cursor: pointer;
    }	
    table.table td:last-child i {
		opacity: 0.9;
		font-size: 22px;
        margin: 0 5px;
    }
	table.table td a {
		font-weight: 400;
		color: #566787;
		display: inline-block;
		text-decoration: none;
		outline: none !important;
	}
	table.table td a:hover {
		color: #2196F3;
	}
	table.table td a.edit {
        color: #FFC107;
    }
    table.table td a.delete {
        color: #F44336;
    }
    table.table td i {
        font-size: 13px;
    }
	table.table .avatar {
		border-radius: 50%;
		vertical-align: middle;
		margin-right: 10px;
	}
    .pagination {
        float: right;
        margin: 0 0 5px;
    }
    .pagination li a {
        border: none;
        font-size: 13px;
        min-width: 30px;
        min-height: 30px;
        color: #999;
        margin: 0 2px;
        line-height: 30px;
        border-radius: 2px !important;
        text-align: center;
        padding: 0 6px;
    }
    .pagination li a:hover {
        color: #666;
    }	
    .pagination li.active a, .pagination li.active a.page-link {
        background: #03A9F4;
    }
    .pagination li.active a:hover {        
        background: #0397d6;
    }
	.pagination li.disabled i {
        color: #ccc;
    }
    .pagination li i {
        font-size: 16px;
        padding-top: 6px
    }
    .hint-text {
        float: left;
        margin-top: 10px;
        font-size: 13px;
    }    
	
	/* Modal styles */
	.modal .modal-dialog {
		max-width: 400px;
	}
	.modal .modal-header, .modal .modal-body, .modal .modal-footer {
		padding: 20px 30px;
	}
	.modal .modal-content {
		border-radius: 3px;
	}
	.modal .modal-footer {
		background: #ecf0f1;
		border-radius: 0 0 3px 3px;
	}
    .modal .modal-title {
        display: inline-block;
    }
	.modal .form-control {
		border-radius: 2px;
		box-shadow: none;
		border-color: #dddddd;
	}
	.modal textarea.form-control {
		resize: vertical;
	}
	.modal .btn {
		border-radius: 2px;
		min-width: 100px;
	}	
	.modal form label {
		font-weight: normal;
	}
.modal-confirm {		
	color: #636363;
	width: 400px;
}
.modal-confirm .modal-content {
	padding: 20px;
	border-radius: 5px;
	border: none;
	text-align: center;
	font-size: 14px;
}
.modal-confirm .modal-header {
	border-bottom: none;   
	position: relative;
}
.modal-confirm h4 {
	text-align: center;
	font-size: 26px;
	margin: 30px 0 -10px;
}
.modal-confirm .close {
	position: absolute;
	top: -5px;
	right: -2px;
}
.modal-confirm .modal-body {
	color: #999;
}
.modal-confirm .modal-footer {
	border: none;
	text-align: center;		
	border-radius: 5px;
	font-size: 13px;
	padding: 10px 15px 25px;
}
.modal-confirm .modal-footer a {
	color: #999;
}		
.modal-confirm .icon-box {
	width: 80px;
	height: 80px;
	margin: 0 auto;
	border-radius: 50%;
	z-index: 9;
	text-align: center;
	border: 3px solid #f15e5e;
}
.modal-confirm .icon-box i {
	color: #f15e5e;
	font-size: 46px;
	display: inline-block;
	margin-top: 13px;
}
.modal-confirm .btn, .modal-confirm .btn:active {
	color: #fff;
	border-radius: 4px;
	background: #60c7c1;
	text-decoration: none;
	transition: all 0.4s;
	line-height: normal;
	min-width: 120px;
	border: none;
	min-height: 40px;
	border-radius: 3px;
	margin: 0 5px;
}
.modal-confirm .btn-secondary {
	background: #c1c1c1;
}
.modal-confirm .btn-secondary:hover, .modal-confirm .btn-secondary:focus {
	background: #a8a8a8;
}
.modal-confirm .btn-danger {
	background: #f15e5e;
}
.modal-confirm .btn-danger:hover, .modal-confirm .btn-danger:focus {
	background: #ee3535;
}
.trigger-btn {
	display: inline-block;
	margin: 100px auto;	
}	
.form-switch .form-check-input{
     width: 4em;
     height: 25px;
     cursor: pointer;
}
.active{
  color: green;
}
.inactive{
   color:red;
}
</style>

<body>
	<div class="wrapper">
	   <div th:insert="~{Faculty/sidebar :: sidebar}"></div>
		<div class="main">
		 	<div th:insert="~{Faculty/header :: header}"></div>
			<main class="content">
				<div class="container-fluid p-0">

					<div class="row mb-2 mb-xl-3">
						<div class="col-auto d-none d-sm-block">
							<h3><strong>Bus</strong> Management</h3>
						</div>

						<div class="col-auto ml-auto text-right mt-n1">
							<nav aria-label="breadcrumb">
								<ol class="breadcrumb bg-transparent p-0 mt-1 mb-0">
									<li class="breadcrumb-item"><a href="#">Faculty</a></li>
									<li class="breadcrumb-item active" aria-current="page">Bus Management</li>
								</ol>
							</nav>
						</div>
				
				<div class="container">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-6">
						<h2>Manage <b>Bus Info</b></h2>
					</div>
                </div>
            </div>
             <div class="table-responsive">
            <table class="table table-hover table-sm" id="table1" style="font-size: 0.75rem">
                <thead>
                    <tr>
                        <th>#</th>                      
                        <th>Bus No.</th>
                        <th>Driver Name</th>
                        <th>Mob No.</th>
                        <th>From</th>
                        <th>To</th>
		                <th>Start Time</th>
		                <th>End Time</th>
		                <th>Status</th>	
			            <th th:data-id="${session.CurrentLoggedInUser.getDepartment()}" class="department">View Stops</th>	
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${buses=='No Records Found'}">
                      <td colspan="10" style="text-align:center;font-weight:bold">No Records Found</td>
                    </tr>
                    <tr th:if="${buses!='No Records Found'}" th:each="bus,i:${buses}">
                        <td><span th:text="${i.index+1}"></span></td>
                        <td><span th:text="${bus.bus_no}"></span></td>
                        <td><span th:text="${bus.driver_name}"></span></td>
                        <td><span th:text="${bus.phno}"></span></td>
                        <td><span th:text="${bus.from}"></span></td>
                        <td><span th:text="${bus.to}"></span></td>
                        <td><span th:text="${bus.start_time}"></span></td>
                        <td><span th:text="${bus.end_time}"></span></td>
                        <td><span th:text="${bus.Status}"></span></td>
                        <td>
                            <a th:href="@{javascript:void(0)}" class="ViewStop" style="color:mediumblue;cursor:pointer" th:data-id="${bus.bus_id}" data-toggle="modal" data-target="#viewStopsModal">View Stops</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            </div>
    </div>
	<!-- Add Modal HTML -->
	<div id="addEmployeeModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form th:action="@{/addbus}" th:object="${bus}" class="register-form" id="register-form" method="POST">
					<div class="modal-header">						
						<h4 class="modal-title">Add Bus</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">					
						<div class="form-group">
							<label>Bus No.</label>
							<input type="number" th:field="*{bus_no}" name="bus_no" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Driver Name</label>
							<input type="text" th:field="*{driver_name}" name="driver_name" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Mob No.</label>
							<input type="tel"  name="phno" th:field="*{phno}" class="form-control" required>
						</div>
						<div class="form-group">
							<label>From</label>
							<input type="text" th:field="*{from}" name="from" class="form-control" required>
						</div>
                       <div class="form-group">
							<label>To</label>
							<input type="text" th:field="*{to}" name="to" class="form-control" required>
						</div>			
                     	<div class="form-group">
							<label>Start Time</label>
							<input type="time"  th:field="*{start_time}" name="start_time" class="form-control" required>
						</div>		
			            <div class="form-group">
							<label>End Time</label>
							<input type="time"  th:field="*{end_time}" name="end_time" class="form-control" required>
						</div>	
                        <div class="form-group">
							<label>Status</label>
							<input type="text" th:field="*{status}" name="status" class="form-control" required>
						</div>			
                                                                                                          	
                                                                                                          	
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<input type="submit" class="btn btn-success" value="Add">
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Edit Modal HTML -->
  <div class="myForm">
	<div id="editEmployeeModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form  th:method="post" th:object="${bus}" class="register-form" id="edit-form">
					<div class="modal-header">						
						<h4 class="modal-title">Update Bus</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">					
						<div class="form-group">
							<label>Bus No.</label>
							<input type="number" th:field="*{bus_no}" name="bus_no" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Driver Name</label>
							<input type="text" th:field="*{driver_name}" name="driver_name" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Mob No.</label>
							<input type="tel"  name="phno" th:field="*{phno}" class="form-control" required>
						</div>
						<div class="form-group">
							<label>From</label>
							<input type="text" th:field="*{from}" name="from" class="form-control" required>
						</div>
                       <div class="form-group">
							<label>To</label>
							<input type="text" th:field="*{to}" name="to" class="form-control" required>
						</div>			
                     	<div class="form-group">
							<label>Start Time</label>
							<input type="time"  th:field="*{start_time}" name="start_time" class="form-control" required>
						</div>		
			            <div class="form-group">
							<label>End Time</label>
							<input type="time"  th:field="*{end_time}" name="end_time" class="form-control" required>
						</div>	
                        <div class="form-group">
							<label>Status</label>
							<input type="text" th:field="*{status}" name="status" class="form-control" required>
						</div>
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<input type="submit" class="btn btn-success" id="editSubmit" value="Save">
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

	<div id="deleteEmployeeModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form>
					<div class="modal-header">						
						<h4 class="modal-title">Delete Employee</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div id="myModal" class="modal fade">
<div class="text-center">
	
	<a href="#myModal" class="trigger-btn" data-toggle="modal">Click to Open Confirm Modal</a>
</div>
	<div class="modal-dialog modal-confirm">
		<div class="modal-content">
			<div class="modal-header flex-column">
				<div class="icon-box">
					<i class="material-icons">&#xE5CD;</i>
				</div>	
                                                            <h4 class="modal-title w-100">Are you sure?</h4>	
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			</div>
			<div class="modal-body">
				<p>Do you really want to delete these records? This process cannot be undone.</p>
			</div>
			<div class="modal-footer justify-content-center">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-danger">Yes, delete it!</button>
			</div>
                                                     </div>
	                                  </div>
                                                    </div>     
				</form>
			</div>
		</div>
	</div>	
	<div id="addStopsModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form  th:object="${bus_mid_stops}" class="addstop-form" id="addstop-form" method="POST">
					<div class="modal-header">						
						<h4 class="modal-title">Add Bus Stop</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">					
						<div class="form-group">
							<label>Stop Name</label>
							<input type="text" th:field="*{stop_name}" name="stop_name" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Time</label>
							<input type="time" th:field="*{stop_time}" name="time" class="form-control" required>
						</div>                                                                                	
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<input type="submit" class="btn btn-success" value="Add">
					</div>
				</form>
			</div>
		</div>
	</div>
	
	<div id="viewStopsModal" class="modal fade">
		<div class="modal-dialog" style="max-width:50%">
			<div class="modal-content">
					<div class="modal-header">						
						<h4 class="modal-title">Bus Stops</h4>
						<button type="button" class="close" id="viewClose" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">					
						<div class="table-responsive">
            <table  id="table2" class="table table-hover table-sm" style="font-size: 0.75rem" >
             <!--    <thead>
                    <tr>
                        <th  data-sortable="true">#</th>                      
                        <th  data-editable="true">Bus Stop Name</th>
                        <th  data-editable="true">Time</th>
                        <th>Actions</th>
                    </tr>
                </thead>-->
                </table>
			</div>
		</div>
	</div>
	</div>
	</div>
	
	</div>
			</main>

			 <div th:insert="~{footer :: footer}"></div>
		</div>
	</div>
	
  
		<script
  type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.2.0/mdb.min.js"
></script>
<script>
$(document).ready(function() {
    $('#table1').DataTable();
    $('#bus_no').val('');
} );
</script>
<script>
$(function() {
	var today=new Date();
	var year= today.getFullYear();
	var month= ("0" + (today.getMonth()+1)).slice(-2);
	var day= ("0" + today.getDate()).slice(-2);
	var todayDate= (year +"-"+ month +"-"+ day);
	
    $('.dob').attr('max',todayDate);
} );
</script>
 <script>
    $(document).ready(function(){
        $('.edit').on('click', function(event){
            //prevents redirection to blank page with JSON-Task-Object
            event.preventDefault();
            var bus_id=$(this).data("id");
            var href = "/findBus/"+bus_id;
            
            $.get(href, function(bus){
            	$('.myForm #edit-form').attr('action',"/updatebus/"+bus.bus_id);
                $('.myForm #bus_no').val(bus.bus_no);
                $('.myForm #driver_name').val(bus.driver_name);
                $('.myForm #phno').val(bus.phno);
                $('.myForm #from').val(bus.from);
                $('.myForm #to').val(bus.to);
                $('.myForm #start_time').val(bus.start_time);
                $('.myForm #end_time').val(bus.end_time);
                $('.myForm #status').val(bus.status);
                console.log($('.myForm #status').val())
            });
            $('.myForm #editEmployeeModal').modal();
        });
    });
</script>
<script>
    $(document).ready(function(){
       	$('.delete').on('click', function(event){
            //prevents redirection to blank page with JSON-Task-Object
            event.preventDefault();
            var bus_id=$(this).data("id");
            var url = "/deleteBus/"+bus_id;
            
            $.post(url, function(bus){
            	$('.myForm #deleteEmployeeModal').modal();
            	/*$.get(window.location.href, function(user){
            		alert(user);
            		alert(window.location.href);
            		var tableBody = $('#table1 tbody');
                	tableBody.empty();
                	$(user).each(function(index,element) {
                		tableBody.append('<tr><td>'+index+1+'</td><td>'+element.name+'></td><td>'+element.email+'</td><td>'+element.phno+'></td><td>'+element.address+'></td><td>'+element.dob+'></td><td>'+element.stream+'></td><td>'+element.department+'></td><td>'+element.username+'></td><td th:if="${user.enabled}"><span class="active">active</span></td><td th:if="!${user.enabled}"><span class="inactive">inactive</span></td><td><a th:href="@{javascript:void(0)}" class="edit" th:data-id="${user.user_id}" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a><a th:href="@{javascript:void(0)}" th:data-id="${user.user_id}" class="delete"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a></td></tr>')
                		console.log(tableBody);
                	})
            	})*/
            	window.location.reload(true);
        });
    });
  });
</script>
<script>
    $(document).ready(function(){
        $('.AddStop').on('click', function(event){
            //prevents redirection to blank page with JSON-Task-Object
            event.preventDefault();
            var bus_id=$(this).data("id");
            $('#addstop-form').attr('action',"/addbusstops/"+bus_id);
        });
    }); 
</script>
<script type="text/javascript">
        $(document).ready(function () {
        	var grid;
          $('.ViewStop').on('click', function(event){
        	var bus_id=$(this).data("id");
        	console.log(bus_id);
        	var href='/viewbusstops/'+bus_id;
           $.get(href, function(stop){
        	//   $('#table2 tbody').empty();
        	console.log(stop.length);
        		grid = $('#table2').grid({
                    dataSource: '/viewbusstops/'+bus_id,
                    uiLibrary: 'bootstrap4',
                    primaryKey: 'stop_id',
                    columns: [
                        { field: 'stop_id',title: '#', width: 44 },
                        { field: 'stop_name', title: 'Stop Name' },
                        { field: 'stop_time', title: 'Stop Time' },
                    ],
                  //  pager: { limit: 5 }
                });
                for(let j=0;j<stop.length;j++){
                	grid.columns[j].field=j+1;
                	console.log(grid);
                }
           });
          });
          $('#viewStopsModal').on('hide.bs.modal', function(event){
        	  window.location.reload(true);
        	  grid.reload();
          });
        });
    </script>
<script>
/*$(document).ready(function(){
$('.ViewStop').on('click', function(event){
    console.log($('#table2'));
    event.preventDefault();
    var bus_id=$(this).data("id");
    var href="/viewbusstops/"+bus_id;
    console.log(href);
    $.get(href, function(result){
    	debugger;
    	$('#table2 tbody').empty();
    		$.each(result,function(i,stop){
    			console.log(i);
    			var busStopRow = '<tr>'+
    			      '<td>' + i+1 + '</td>'+
    			      '<td>' + stop.stop_name + '</td>'+
    			      '<td>' + stop.stop_time + '</td>'+
    			      '<td><a th:href="@{javascript:void(0)}" class="edit edit1" th:data-id="${stop.stop_id}"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>'+
                      '<a th:href="@{javascript:void(0)}" th:data-id="${stop.stop_id}" class="delete delete1"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>'+'</td>'+
    			      '</tr>';
    			 $('#table2 tbody').append(busStopRow);     
    			console.log(busStopRow);
    			 var stop_id=$('.delete1').data("id");
    			 console.log(stop_id);
    		});
    	});
	  var stop_id=$('.edit1').data("id");
    $('#table2').attr('data-url',"/viewbusstops/"+bus_id);
    $('#table2').attr('data-editable-url',"/updatebusstops/"+stop_id);
});
});*/
</script>
<script>
 /*   $(document).ready(function(){
       	$('.delete1').on('click', function(event){
            event.preventDefault();
            var stop_id=$(this).data("id");
            console.log(stop_id);
            var url = "/deletebusstops/"+stop_id;
            
            $.post(url, function(bus){
            	$('.myForm #deleteEmployeeModal').modal();
            	window.location.reload(true);
        });
    });
  });*/
</script>
<script>
   /* $(document).ready(function(){
       	console.log("hi");
       	debugger;
        $('#editSubmit').on('click', function(event){
            //prevents redirection to blank page with JSON-Task-Object
            event.preventDefault();
            var url = "/updateuser";
            var formData=$('#edit-form').serialize;
            console.log(formData);
            $.ajax({
                url: url,
                type: "POST",
                data: formData,
                dataType: 'json', // lowercase is always preferered though jQuery does it, too.
                success: function(user){
                debugger;
            	alert("wow");
        }
    });
 });
 });*/
</script>       
	<script>
		$(function() {
			var ctx = document.getElementById('chartjs-dashboard-line').getContext("2d");
			var gradient = ctx.createLinearGradient(0, 0, 0, 225);
			gradient.addColorStop(0, 'rgba(215, 227, 244, 1)');
			gradient.addColorStop(1, 'rgba(215, 227, 244, 0)');
			// Line chart
			new Chart(document.getElementById("chartjs-dashboard-line"), {
				type: 'line',
				data: {
					labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
					datasets: [{
						label: "Sales ($)",
						fill: true,
						backgroundColor: gradient,
						borderColor: window.theme.primary,
						data: [
							2115,
							1562,
							1584,
							1892,
							1587,
							1923,
							2566,
							2448,
							2805,
							3438,
							2917,
							3327
						]
					}]
				},
				options: {
					maintainAspectRatio: false,
					legend: {
						display: false
					},
					tooltips: {
						intersect: false
					},
					hover: {
						intersect: true
					},
					plugins: {
						filler: {
							propagate: false
						}
					},
					scales: {
						xAxes: [{
							reverse: true,
							gridLines: {
								color: "rgba(0,0,0,0.0)"
							}
						}],
						yAxes: [{
							ticks: {
								stepSize: 1000
							},
							display: true,
							borderDash: [3, 3],
							gridLines: {
								color: "rgba(0,0,0,0.0)"
							}
						}]
					}
				}
			});
		});
	</script>
	<script>
		$(function() {
			// Pie chart
			new Chart(document.getElementById("chartjs-dashboard-pie"), {
				type: 'pie',
				data: {
					labels: ["Chrome", "Firefox", "IE"],
					datasets: [{
						data: [4306, 3801, 1689],
						backgroundColor: [
							window.theme.primary,
							window.theme.warning,
							window.theme.danger
						],
						borderWidth: 5
					}]
				},
				options: {
					responsive: !window.MSInputMethodContext,
					maintainAspectRatio: false,
					legend: {
						display: false
					},
					cutoutPercentage: 75
				}
			});
		});
	</script>
	<script>
		$(function() {
			// Bar chart
			new Chart(document.getElementById("chartjs-dashboard-bar"), {
				type: 'bar',
				data: {
					labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
					datasets: [{
						label: "This year",
						backgroundColor: window.theme.primary,
						borderColor: window.theme.primary,
						hoverBackgroundColor: window.theme.primary,
						hoverBorderColor: window.theme.primary,
						data: [54, 67, 41, 55, 62, 45, 55, 73, 60, 76, 48, 79],
						barPercentage: .75,
						categoryPercentage: .5
					}]
				},
				options: {
					maintainAspectRatio: false,
					legend: {
						display: false
					},
					scales: {
						yAxes: [{
							gridLines: {
								display: false
							},
							stacked: false,
							ticks: {
								stepSize: 20
							}
						}],
						xAxes: [{
							stacked: false,
							gridLines: {
								color: "transparent"
							}
						}]
					}
				}
			});
		});
	</script>
	<script>
		$(function() {
			$("#world_map").vectorMap({
				map: "world_mill",
				normalizeFunction: "polynomial",
				hoverOpacity: .7,
				hoverColor: false,
				regionStyle: {
					initial: {
						fill: "#e3eaef"
					}
				},
				markerStyle: {
					initial: {
						"r": 9,
						"fill": window.theme.primary,
						"fill-opacity": .95,
						"stroke": "#fff",
						"stroke-width": 7,
						"stroke-opacity": .4
					},
					hover: {
						"stroke": "#fff",
						"fill-opacity": 1,
						"stroke-width": 1.5
					}
				},
				backgroundColor: "transparent",
				zoomOnScroll: false,
				markers: [{
						latLng: [31.230391, 121.473701],
						name: "Shanghai"
					},
					{
						latLng: [28.704060, 77.102493],
						name: "Delhi"
					},
					{
						latLng: [6.524379, 3.379206],
						name: "Lagos"
					},
					{
						latLng: [35.689487, 139.691711],
						name: "Tokyo"
					},
					{
						latLng: [23.129110, 113.264381],
						name: "Guangzhou"
					},
					{
						latLng: [40.7127837, -74.0059413],
						name: "New York"
					},
					{
						latLng: [34.052235, -118.243683],
						name: "Los Angeles"
					},
					{
						latLng: [41.878113, -87.629799],
						name: "Chicago"
					},
					{
						latLng: [51.507351, -0.127758],
						name: "London"
					},
					{
						latLng: [40.416775, -3.703790],
						name: "Madrid"
					}
				]
			});
			setTimeout(function() {
				$(window).trigger('resize');
			}, 250)
		});
	</script>
	<script>
		$(function() {
			$('#datetimepicker-dashboard').datetimepicker({
				inline: true,
				sideBySide: false,
				format: 'L'
			});
		});
	</script>

</body>

</html>